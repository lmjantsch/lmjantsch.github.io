---
import { Moon, Sun } from '@lucide/astro';
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../data/consts';
---

<header class="w-full h-[10vh] bg-primary_bg dark:bg-primary_bg_dark">
  <nav class="max-w-6xl mx-auto flex flex-row items-center justify-between px-6 py-4">
    <h2 class="text-2xl font-bold text-secondary dark:text-secondary_dark">
      <a href="/">{SITE_TITLE}</a>
    </h2>
    <div class="flex items-center gap-4 text-primary dark:text-white">
      <!-- <HeaderLink href="/">Home</HeaderLink>
      <HeaderLink href="/about">About</HeaderLink> -->
      <button
        id="dark-toggle"
        class="ml-4 p-2 rounded-full hover:bg-gray-300 dark:hover:bg-gray-600 hover:scale-[1.10] transition-all cursor-pointer"
        aria-label="Toggle Dark Mode"
      >
        <Moon class="w-5 h-5 dark:hidden" />
        <Sun class="w-5 h-5 hidden dark:block" />
      </button>
    </div>
  </nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('dark-toggle');
    const root = document.documentElement;

    if (!toggle) return; // safety guard

    // Initialize dark mode from localStorage or system preference
    if (localStorage.theme === 'dark' || 
        (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      root.classList.add('dark');
    }

    toggle.addEventListener('click', () => {
      if (root.classList.contains('dark')) {
        root.classList.remove('dark');
        localStorage.theme = 'light';
      } else {
        root.classList.add('dark');
        localStorage.theme = 'dark';
      }
    });
  });
</script>
</header>
